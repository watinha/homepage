
var DiagonalView=function(e,c,d){var b={},a={main_elements:e.main_elements};b.render=function(){var f;for(f=0;f<a.main_elements.length;f=f+1){c.addClass(a.main_elements[f],"diagonal")}};b.clean=function(){var f;for(f=0;f<a.main_elements.length;f=f+1){c.removeClass(a.main_elements[f],"diagonal");c.removeClass(a.main_elements[f],"open");a.main_elements[f].style.bottom=""}};b.click=function(j){var h=d.event||j,k=h.target,g=a.get_main_parent(k),f;for(f=0;f<a.main_elements.length;f=f+1){c.removeClass(a.main_elements[f],"open");a.main_elements[f].style.bottom="";if(a.main_elements[f]===g){g.style.bottom=String(10+50*f)+"px"}}c.addClass(g,"open")};a.get_main_parent=function(g){var f;if(g.tagName==="BODY"||!g.parentNode){return false}for(f=0;f<a.main_elements.length;f=f+1){if(g===a.main_elements[f]){return g}}return a.get_main_parent(g.parentNode)};return b};var Helpers=(function(){var a={};a.addClass=function(c,d){var b;if(Helpers.hasClass(c,d)){return}b=c.className.split(" ");b.push(d);c.className=b.join(" ").replace(/^\s+|\s+$/g,"")};a.hasClass=function(c,d){var b=c.className.split(" ");return(b.indexOf(d)>=0)};a.removeClass=function(c,d){var b;if(!Helpers.hasClass(c,d)){return}b=c.className.split(" ");b.splice(b.indexOf(d),1);c.className=b.join(" ").replace(/^\s+|\s+$/g,"")};a.activateListener=function(b,c){b.tabIndex=0;b.addEventListener("click",c,true);b.addEventListener("keydown",function(d){if(d.keyCode===13||d.keyCode===32){c.apply(this,arguments)}},true)};return a}());var KeyboardHandler=function(d,c){var b={},a={main_elements:d.main_elements};b.move_down=function(e){var g=a.find_active(e),f=g===null?0:(g+1)%a.main_elements.length;if(a.main_elements[f].className&&c.hasClass(a.main_elements[f],"open")){f=(g+2)%a.main_elements.length}a.main_elements[f].focus()};b.move_up=function(e){var g=a.find_active(e)-1,f=(g>=0?g:(a.main_elements.length-1));if(a.main_elements[f].className&&c.hasClass(a.main_elements[f],"open")){f=((g-1)>=0?(g-1):(a.main_elements.length-1))}a.main_elements[f].focus()};a.find_active=function(e){var f;for(f=0;f<a.main_elements.length;f=f+1){if(e&&(a.main_elements[f]===e||a.main_elements[f]===e.parentNode)){return f}}return null};return b};var StandardView=function(d,c){var b={},a={base_elements:d.base_elements,first_line:d.first_line};b.render=function(){var e=c.prefixed("transform"),g,f;for(f=0;f<a.base_elements.length;f=f+1){a.base_elements[f].style.left=String(Math.floor(f*40/(a.base_elements.length-1)))+"%";g=Math.ceil(6+4*f/(a.base_elements.length-1))/10;a.base_elements[f].style[e]="scale("+String(g)+") matrix(1, 0, 0, 1, 0, 0)";a.base_elements[f].style.marginTop="-4%"}a.first_line.style.marginBottom="3%"};b.clean=function(){var e=c.prefixed("transform"),f;for(f=0;f<a.base_elements.length;f=f+1){a.base_elements[f].style.left="";a.base_elements[f].style[e]="";a.base_elements[f].style.marginTop=""}a.first_line.style.marginBottom=""};return b};var ViewController=function(e,c,d){var b={},a={body_element:e.body_element,first_line:e.first_line,layout_objs:e.layout_objs,click_handler:e.click_handler};b.init=function(){c.addClass(a.body_element,"files");c.addClass(a.first_line,"headerLongerLine")};b.render=function(f){a.clean_layouts();a.layout_objs[f].render()};b.click=function(f){var g=d.target||(f&&f.target);a.clean_layouts();a.click_handler.render();a.click_handler.click.apply(g,arguments)};a.clean_layouts=function(){var f;for(f in a.layout_objs){if(a.layout_objs.hasOwnProperty(f)){a.layout_objs[f].clean()}}if(a.click_handler&&a.click_handler.clean){a.click_handler.clean()}};return b};(function(){window.onload=function(){if(document.querySelectorAll){var a=(function(){var f,g,e,h,c=document.querySelector("body > div.header+hr"),d=document.querySelectorAll("body > div > div:not(.header)"),i=document.querySelector("body > .wrapper"),b=null;f=function(){var k=DiagonalView({main_elements:d},Helpers,window),j=StandardView({base_elements:d,first_line:c},Modernizr);b=ViewController({body_element:document.body,first_line:c,layout_objs:{standard:j,diagonal:k},click_handler:k},Helpers,window);b.init();b.render("standard")};g=function(){var k=KeyboardHandler({main_elements:d},Helpers);for(var j=0;j<d.length;j++){Helpers.activateListener(d[j],b.click)}document.body.addEventListener("keydown",function(m){var l;switch(m.keyCode){case 27:b.render("standard");break;case 40:k.move_down(document.activeElement);break;case 39:k.move_down(document.activeElement);break;case 38:k.move_up(document.activeElement);break;case 37:k.move_up(document.activeElement);break}},true)};e=function(){var j;i.setAttribute("role","list");for(j=0;j<d.length;j++){(function(){var l=d[j].className,k=d[j],m=k.querySelector("#"+l+"_header");k.setAttribute("aria-labelledby",l+"_header");k.setAttribute("role","listitem");k.setAttribute("aria-controls",l+"_panel");k.addEventListener("focus",function(){m.tabIndex=-1});k.addEventListener("click",function(){m.tabIndex=0;m.focus()});k.addEventListener("keydown",function(n){if(n.keyCode!=13&&n.keyCode!=32){return}m.tabIndex=0;m.focus()})})()}};h=function(){e();f();g()};return{init:h}})().init()}}})();